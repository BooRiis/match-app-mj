"use strict";(self.webpackChunkmatch_app=self.webpackChunkmatch_app||[]).push([[154],{1154:(gt,z,l)=>{l.r(z),l.d(z,{MatchModule:()=>ut});var t=l(5879),k=l(6814),T=l(9790),se=l(7582),D=l(8791),C=l(7700),N=function(i){return i.DATE="dd.MM.YYYY, hh:mm a",i}(N||{});let L=(()=>{var i;class n{constructor(e,a){this.data=e,this.dialogRef=a,this.DATE_FORMAT=N.DATE,this.nameStatus={}}closeDialog(){if(this.data.name in this.nameStatus){const e=this.nameStatus[this.data.name];e.past&&(e.opened=!1)}this.dialogRef.close()}}return(i=n).\u0275fac=function(e){return new(e||i)(t.Y36(C.WI),t.Y36(C.so))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-match-modal"]],decls:16,vars:6,consts:[[1,"container"],[1,"header"],[3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h2"),t._uU(3),t.qZA(),t.TgZ(4,"button",2),t.NdJ("click",function(){return a.closeDialog()}),t._uU(5,"Close"),t.qZA()(),t.TgZ(6,"div")(7,"p")(8,"strong"),t._uU(9,"Start Date:"),t.qZA(),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"p")(13,"strong"),t._uU(14,"Possible winner:"),t.qZA(),t._uU(15),t.qZA()()()),2&e&&(t.xp6(3),t.Oqu(a.data.name),t.xp6(7),t.hij(" ",t.xi3(11,3,a.data.startDate,a.DATE_FORMAT),""),t.xp6(5),t.hij(" ",a.data.possibleWinner,""))},dependencies:[k.uU],styles:[".container[_ngcontent-%COMP%]{margin:15px}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:13px}"]}),n})();var g=l(6223),G=l(5195),y=l(5683),V=l(2296),U=l(2032),M=l(2517);let de=(()=>{var i;class n{constructor(e,a){this.dialogRef=e,this.formBuilder=a}ngOnInit(){this.form=this.formBuilder.group({name:["",[g.kI.required,g.kI.minLength(4)]],possibleWinner:[""],startDate:[""],search:[""]})}onCreateMatch(e,a,c){const r={id:this.generateUniqueId(),name:e,startDate:a,possibleWinner:c,isCompleted:!1};this.form.reset(),this.dialogRef.close(r)}generateUniqueId(){return(new Date).getTime().toString(16)+Math.random().toString(16).substring(2)}}return(i=n).\u0275fac=function(e){return new(e||i)(t.Y36(C.so),t.Y36(g.qu))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-match"]],decls:23,vars:4,consts:[[1,"center-items"],[1,"header"],[1,"add-list",3,"formGroup"],["formControlName","name","required","","matInput","","placeholder","Name"],["name",""],["formControlName","possibleWinner","matInput","","placeholder","Possible winner"],["possibleWinner",""],["matInput","","formControlName","startDate","autocomplete","false",3,"matDatetimepicker"],["date",""],["matSuffix","",3,"for"],["type","datetime"],["dts",""],[1,"button-position"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,a){if(1&e){const c=t.EpF();t.TgZ(0,"div",0)(1,"mat-card")(2,"div",1)(3,"h2"),t._uU(4,"Match Lists"),t.qZA()(),t.TgZ(5,"form",2)(6,"mat-form-field"),t._UZ(7,"input",3,4),t.qZA(),t.TgZ(9,"mat-form-field"),t._UZ(10,"input",5,6),t.qZA(),t.TgZ(12,"mat-form-field")(13,"mat-label"),t._uU(14,"Select Date and time"),t.qZA(),t._UZ(15,"input",7,8)(17,"mat-datetimepicker-toggle",9)(18,"mat-datetimepicker",10,11),t.qZA(),t.TgZ(20,"div",12)(21,"button",13),t.NdJ("click",function(){t.CHM(c);const d=t.MAs(8),h=t.MAs(16),u=t.MAs(11);return t.KtG(a.onCreateMatch(d.value,h.value,u.value))}),t._uU(22," Create "),t.qZA()()()()()}if(2&e){const c=t.MAs(19);t.xp6(5),t.Q6J("formGroup",a.form),t.xp6(10),t.Q6J("matDatetimepicker",c),t.xp6(2),t.Q6J("for",c),t.xp6(4),t.Q6J("disabled",!a.form.valid)}},dependencies:[G.a8,y.KE,y.hX,y.R9,V.lW,U.Nt,M._R,M.C,M.RZ,g._Y,g.Fj,g.JJ,g.JL,g.Q7,g.sg,g.u],styles:[".center-items[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}mat-card[_ngcontent-%COMP%]{background-color:#f3faff;padding:20px;max-width:1000px}mat-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}mat-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#5fbcff}mat-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#5fbcff;color:#fff}h2[_ngcontent-%COMP%]{color:#1f5174;margin:10px 0}.add-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:20px;width:830px}mat-form-field[_ngcontent-%COMP%]{margin-bottom:10px;width:100%}.button-position[_ngcontent-%COMP%]{padding-bottom:30px}.button-position[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-width:2px;background-color:#5fbcff;color:#fff;cursor:pointer;width:150px;margin-left:10px}.button-position[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#165379}.button-position[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:25px}"]}),n})();var s=l(4221);const I=(0,s.PH)("[Matches] Load Matches"),H=(0,s.PH)("[Matches] Load Matches Success",(0,s.Ky)()),q=(0,s.PH)("[Matches] Load Matches Failure",(0,s.Ky)()),j=(0,s.PH)("[Matches] Add Match",(0,s.Ky)()),Z=(0,s.PH)("[Matches] Add Match Success",(0,s.Ky)()),le=(0,s.PH)("[Matches] Add Match Failure",(0,s.Ky)()),Q=(0,s.PH)("[Matches] Update Match",(0,s.Ky)()),K=(0,s.PH)("[Matches] Update Match Success",(0,s.Ky)()),he=(0,s.PH)("[Matches] Update Match Failure",(0,s.Ky)()),W=(0,s.PH)("[Matches] Delete Match",(0,s.Ky)()),$=(0,s.PH)("[Matches] Delete Match Success",(0,s.Ky)()),me=(0,s.PH)("[Matches] Delete Match Failure",(0,s.Ky)()),F=(0,s.PH)("[Auth] Logout"),Y="matches",ue=(0,s.Lq)({Matches:[],loading:!1,error:null},(0,s.on)(I,i=>({...i,loading:!0,error:null})),(0,s.on)(H,(i,{matches:n})=>({...i,Matches:n,loading:!1})),(0,s.on)(q,(i,{error:n})=>({...i,loading:!1,error:n})),(0,s.on)(Z,(i,{match:n})=>({...i,Matches:[...i.Matches,n]})),(0,s.on)(K,(i,{match:n})=>({...i,Matches:i.Matches.map(o=>o.id===n.id?n:o)})),(0,s.on)($,(i,{id:n})=>({...i,Matches:i.Matches.filter(o=>o.id!==n)})),(0,s.on)(F,i=>({...i,token:null}))),P=(0,s.ZF)(Y),_e=(0,s.P1)(P,i=>i.Matches),ge=(0,s.P1)(P,i=>i.loading),be=(0,s.P1)(P,i=>i.error);let J=(()=>{var i;class n{constructor(e){this.store=e,this.matches$=this.store.pipe((0,s.Ys)(_e)),this.loading$=this.store.pipe((0,s.Ys)(ge)),this.error$=this.store.pipe((0,s.Ys)(be))}loadMatches(){this.store.dispatch(I())}addMatch(e){this.store.dispatch(j({match:e}))}updateMatchStatus(e,a){this.store.dispatch(Q({id:e,isCompleted:a}))}deleteMatch(e){this.store.dispatch(W({id:e}))}logout(){this.store.dispatch(F())}}return(i=n).\u0275fac=function(e){return new(e||i)(t.LFG(s.yh))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),n})(),fe=(()=>{var i;class n{constructor(e,a){this.el=e,this.renderer=a}ngOnChanges(){this.updateBackgroundColor()}updateBackgroundColor(){const e=this.appGroupColor.filter(a=>a.isCompleted).length;e>1?this.renderer.setStyle(this.el.nativeElement,"background-color","red"):1===e?this.renderer.setStyle(this.el.nativeElement,"background-color","orange"):this.renderer.removeStyle(this.el.nativeElement,"background-color")}}return(i=n).\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(t.Qsj))},i.\u0275dir=t.lG2({type:i,selectors:[["","appGroupColor",""]],inputs:{appGroupColor:"appGroupColor"},features:[t.TTD]}),n})();var v;function xe(i,n){if(1&i){const o=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(o);const a=t.oxw().$implicit,c=t.oxw(2);return t.KtG(c.onDelete(a.id))}),t._uU(1,"delete"),t.qZA()}}function ke(i,n){if(1&i){const o=t.EpF();t.TgZ(0,"div",8)(1,"div",9)(2,"button",10),t.NdJ("click",function(){const c=t.CHM(o).$implicit,r=t.oxw(2);return t.KtG(r.openMatchModal(c))}),t.TgZ(3,"strong"),t._uU(4),t.qZA()(),t.YNc(5,xe,2,0,"button",11),t.qZA()()}if(2&i){const o=n.$implicit;t.xp6(2),t.Q6J("disabled",o.isCompleted),t.xp6(2),t.hij(" ",o.name," "),t.xp6(1),t.Q6J("ngIf",o.isCompleted)}}function ve(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"div",6)(2,"h2"),t._uU(3),t.qZA(),t.YNc(4,ke,6,3,"div",7),t.qZA(),t.BQk()),2&i){const o=n.$implicit,e=t.oxw();t.xp6(1),t.Q6J("appGroupColor",e.matchesByDate[o]),t.xp6(2),t.Oqu(o),t.xp6(1),t.Q6J("ngForOf",e.matchesByDate[o])}}let R=((v=class{constructor(n,o){this.matchFacade=n,this.dialog=o,this.matchesByDate={},this.matchesByDateKeys=[],this.nameStatus={},this.nameUpdateStatus={}}ngOnInit(){this.matchFacade.loadMatches(),this.matchFacade.matches$.pipe((0,D.t)(this)).subscribe(n=>{0===this.matchesByDateKeys.length?this.groupMatchesByDate(n):this.partialRefreshMatches(n)})}groupMatchesByDate(n){this.matchesByDate={},n.forEach(o=>{const e=new Date(o.startDate).toDateString();this.matchesByDate[e]||(this.matchesByDate[e]=[],this.matchesByDateKeys.push(e)),this.matchesByDate[e].push(o)}),this.matchesByDateKeys.sort((o,e)=>new Date(o).getTime()-new Date(e).getTime())}openMatchModal(n){const o=this.getGroupDateForMatchId(n.id);if(o){const c=new Date(o)<new Date;if(c&&!this.nameStatus[n.name]){this.dialog.open(L,{width:"400px",data:n});const r={...n,isCompleted:!0};this.matchFacade.updateMatchStatus(r.id,!0),this.nameStatus[n.name]={opened:!0,past:!0}}else if(!c){if(this.dialog.open(L,{width:"400px",data:n}),!this.nameUpdateStatus[n.name]){const r={...n,isCompleted:!1};this.matchFacade.updateMatchStatus(r.id,!1),this.nameUpdateStatus[n.name]=!0}this.nameStatus[n.name]={opened:!0,past:!1}}}}onCreateMatchModal(){this.dialog.open(de,{width:"100%",maxWidth:870}).afterClosed().pipe((0,D.t)(this)).subscribe(o=>{if(o){const e=new Date(o.startDate).toDateString();this.matchesByDate[e]||(this.matchesByDate[e]=[],this.matchesByDateKeys.push(e),this.matchesByDateKeys.sort((a,c)=>new Date(a).getTime()-new Date(c).getTime())),this.matchesByDate[e].push(o),this.matchFacade.addMatch(o)}})}partialRefreshMatches(n){const o={};n.forEach(e=>{const a=new Date(e.startDate).toDateString();o[a]||(o[a]=[]),o[a].push(e)}),this.matchesByDate={...this.matchesByDate,...o}}getGroupDateForMatchId(n){for(const o of this.matchesByDateKeys)if(this.matchesByDate[o].some(a=>a.id===n))return o}onDelete(n){const o=this.getGroupDateForMatchId(n);if(o){const e=this.matchesByDateKeys.indexOf(o);if(-1!==e){const a=this.matchesByDate[o],c=a.findIndex(r=>r.id===n);-1!==c&&(a.splice(c,1),0===a.length&&this.matchesByDateKeys.splice(e,1))}}this.matchFacade.deleteMatch(n)}onLogout(){this.matchFacade.logout()}}).\u0275fac=function(n){return new(n||v)(t.Y36(J),t.Y36(C.uw))},v.\u0275cmp=t.Xpm({type:v,selectors:[["app-match"]],decls:9,vars:1,consts:[[1,"container"],[1,"logout-btn"],[3,"click"],[1,"group-container"],[1,"create-new"],[4,"ngFor","ngForOf"],[1,"match-group",3,"appGroupColor"],["class","match-button",4,"ngFor","ngForOf"],[1,"match-button"],[1,"match-name"],[1,"btn-style",3,"disabled","click"],["class","on-delete",3,"click",4,"ngIf"],[1,"on-delete",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){return o.onLogout()}),t._uU(3,"Log out"),t.qZA()(),t.TgZ(4,"div",3)(5,"div",4)(6,"button",2),t.NdJ("click",function(){return o.onCreateMatchModal()}),t._uU(7,"Add match"),t.qZA()(),t.YNc(8,ve,5,3,"ng-container",5),t.qZA()()),2&n&&(t.xp6(8),t.Q6J("ngForOf",o.matchesByDateKeys))},dependencies:[k.sg,k.O5,fe],styles:[".container[_ngcontent-%COMP%]{margin:10px}.container[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;cursor:pointer;padding:0 15px}.container[_ngcontent-%COMP%]   .logout-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px 10px}.container[_ngcontent-%COMP%]   .group-container[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;gap:20px;margin:25px}.container[_ngcontent-%COMP%]   .group-container[_ngcontent-%COMP%]   .create-new[_ngcontent-%COMP%]{max-width:600px;width:100%;margin:15px;cursor:pointer}.container[_ngcontent-%COMP%]   .group-container[_ngcontent-%COMP%]   .create-new[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;border-radius:10px;padding:15px;font-weight:600}.container[_ngcontent-%COMP%]   .group-container[_ngcontent-%COMP%]   .match-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:1px solid #113654;border-radius:10px;padding:10px;background-color:#fff;box-shadow:0 2px 4px #0000001a;max-width:600px;width:100%}.container[_ngcontent-%COMP%]   .group-container[_ngcontent-%COMP%]   .match-button[_ngcontent-%COMP%]{margin-bottom:10px}.container[_ngcontent-%COMP%]   .match-name[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.container[_ngcontent-%COMP%]   .match-name[_ngcontent-%COMP%]   .on-delete[_ngcontent-%COMP%]{margin-left:10px}.container[_ngcontent-%COMP%]   .btn-style[_ngcontent-%COMP%]{width:100%;padding:5px;cursor:pointer}"]}),v);R=(0,se.gn)([(0,D.c)()],R);const ye=[{path:"",component:R}];let Ce=(()=>{var i;class n{}return(i=n).\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[T.Bz.forChild(ye),T.Bz]}),n})(),Me=(()=>{var i;class n{}return(i=n).\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({}),n})();var we=l(8484),p=l(3680);l(6825);let Oe=(()=>{var i;class n{}return(i=n).\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[k.ez,p.BQ,Me,we.eL]}),n})();l(4191),l(2495);let Ge=(()=>{var i;class n{}return(i=n).\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[p.BQ,k.ez,p.si,p.BQ]}),n})();var Ve=l(8034),ae=l(9594),Ue=l(4661);const Qe={provide:new t.OlP("mat-select-scroll-strategy"),deps:[ae.aV],useFactory:function Ze(i){return()=>i.scrollStrategies.reposition()}};let Ke=(()=>{var i;class n{}return(i=n).\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[Qe],imports:[k.ez,ae.U8,p.Ng,p.BQ,Ue.ZD,y.lN,p.Ng,p.BQ]}),n})(),ce=(()=>{var i;class n{}return(i=n).\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({}),n})(),rt=(()=>{var i;class n{}return(i=n).\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[p.BQ,p.si,ce,p.BQ,ce]}),n})(),lt=(()=>{var i;class n{}return(i=n).\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[k.ez,p.BQ]}),n})();var b=l(7483),w=l(1631),O=l(7398),S=l(6306),ht=l(9397),E=l(2096),mt=l(9862);let re=(()=>{var i;class n{constructor(e){this.http=e,this.apiUrl="https://64e9efb9bf99bdcc8e671c9f.mockapi.io"}fetchMatches(){return this.http.get(`${this.apiUrl}/api/v1/match`)}addMatch(e){return this.http.post(`${this.apiUrl}/api/v1/match`,e)}updateMatchStatus(e,a){return this.http.put(`${this.apiUrl}/api/v1/match/${e}`,{isCompleted:a})}deleteMatch(e){return this.http.delete(`${this.apiUrl}/api/v1/match/${e}`)}}return(i=n).\u0275fac=function(e){return new(e||i)(t.LFG(mt.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),n})(),pt=(()=>{var i;class n{constructor(e,a,c){this.actions$=e,this.matchService=a,this.router=c,this.loadMatch$=(0,b.GW)(()=>this.actions$.pipe((0,b.l4)(I),(0,w.z)(()=>this.matchService.fetchMatches().pipe((0,O.U)(r=>H({matches:r})),(0,S.K)(r=>(0,E.of)(q({error:r.message}))))))),this.addMatch$=(0,b.GW)(()=>this.actions$.pipe((0,b.l4)(j),(0,w.z)(({match:r})=>this.matchService.addMatch(r).pipe((0,O.U)(d=>Z({match:d})),(0,S.K)(d=>(0,E.of)(le({error:d.message}))))))),this.updateMatch$=(0,b.GW)(()=>this.actions$.pipe((0,b.l4)(Q),(0,w.z)(({id:r,isCompleted:d})=>this.matchService.updateMatchStatus(r,d).pipe((0,O.U)(h=>K({match:h})),(0,S.K)(h=>(0,E.of)(he({error:h.message}))))))),this.deleteMatch$=(0,b.GW)(()=>this.actions$.pipe((0,b.l4)(W),(0,w.z)(({id:r})=>this.matchService.deleteMatch(r).pipe((0,O.U)(()=>$({id:r})),(0,S.K)(d=>(0,E.of)(me({error:d.message}))))))),this.logout$=(0,b.GW)(()=>this.actions$.pipe((0,b.l4)(F),(0,ht.b)(()=>{localStorage.removeItem("token"),this.router.navigate(["/login"])})),{dispatch:!1})}}return(i=n).\u0275fac=function(e){return new(e||i)(t.LFG(b.eX),t.LFG(re),t.LFG(T.F0))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),n})(),ut=(()=>{var i;class n{}return(i=n).\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[J,re,{provide:t.soG,useValue:"en-EN"},{provide:p.Ad,useValue:"en-EN"}],imports:[k.ez,Ce,G.QW,y.lN,Oe,V.ot,U.c,Ge,Ve.FA,p.XK,M.ni,Ke,rt,lt,g.UX,s.Aw.forFeature(Y,ue),b.sQ.forFeature([pt])]}),n})()}}]);